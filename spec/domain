# vim:ft=Marchfile

domain User {
    ID int -- index "primary"
    Name string
    Email string -- validate "email"
    Login string -- validate "regex:[a-zA-Z0-9]"
    Password hash -- visibility "hidden"
    IsAdmin bool
    Address {
        Phone string
        Address string
    }
    Metadata {
        LastLogin timestamp
    }
    Groups []Group -- fetch "LAZY"
}

domain UserCreateRequest {
    Name    @User.Name
    Email   @User.Email
    Login   @User.Login
    Phone   @Address.Phone
    Address @Address.Address
}

domain UserUpdateRequest {
    Name    @User.Name
    Email   @User.Email
    Phone   @Address.Phone
    Address @Address.Address
}

domain Group {
    ID int -- index "primary"
    Name string
}
